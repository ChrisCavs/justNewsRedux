!function(){"use strict";function e(e){var t=[];Array.from(document.querySelectorAll(".content-grid")).forEach(function(e){t.push(e.classList[1])});var n=document.querySelector(".active").classList,c=document.querySelector("."+e).classList;n[1]!=c[1]&&(t.indexOf(n[1])<t.indexOf(c[1])?(c.toggle("move-right"),n.toggle("move-left")):(c.toggle("move-left"),n.toggle("move-right")),n.remove("active"),c.add("active"),document.querySelector(".active-nav").classList.remove("active-nav"),document.querySelector(".nav-"+e).classList.add("active-nav"))}function t(){if(""==document.querySelector(".viewName").value)return void alert("Please give your view a name");if(document.querySelector(".viewName").value.split("").includes(" "))return void alert("View names cannot contain spaces");if(document.querySelectorAll(".selected").length<1)return void alert("View must contain at least one source");var t=document.querySelector(".viewName").value,n=[];console.log("sourceName: "+t),Array.from(document.querySelectorAll(".selected")).forEach(function(e){n.push(e.classList[1])}),console.log("sourceArray: "+n),document.querySelector(".modal").style.display="none";var c=JSON.parse(window.localStorage.getItem("Data"));null==c&&(c={}),c[t]=n;var r=JSON.stringify(c);window.localStorage.setItem("Data",r),l(),e(t)}function n(e){function n(){var e=this,t=!1;if(null!==document.querySelector(".selected")&&Array.from(document.querySelectorAll(".selected")).forEach(function(n){n.classList.contains(e.classList[1])&&(t=!0)}),console.log(t),!t){var n=document.createElement("p"),c=document.createTextNode(this.innerHTML);n.appendChild(c),n.classList.add("selected",this.classList[1]),document.querySelector(".selections").appendChild(n),Array.from(document.querySelectorAll(".selected")).forEach(function(e){return e.addEventListener("click",function(){e.parentNode.removeChild(e)})})}}console.log("revealModal fires"),""==e&&(Array.from(document.querySelector(".selections").getElementsByTagName("p")).forEach(function(e){e.parentNode.removeChild(e)}),document.querySelector(".viewName").value=""),document.querySelector(".modal").style.display="block";var c=JSON.parse(window.localStorage.getItem("Data"));if(null!==c&&""!==e){var r=c[e];Array.from(document.querySelector(".selections").getElementsByTagName("p")).forEach(function(e){e.parentNode.removeChild(e)}),r.forEach(function(e){var t=document.querySelector(".modal-content ."+e),n=document.createElement("p"),c=document.createTextNode(t.innerHTML);n.appendChild(c),n.classList.add("selected",t.classList[1]),document.querySelector(".selections").appendChild(n),Array.from(document.querySelectorAll(".selected")).forEach(function(e){return e.addEventListener("click",function(){e.parentNode.removeChild(e)})})}),document.querySelector(".viewName").value=e}document.querySelector(".add-selections").addEventListener("click",t),document.querySelector(".cancel").addEventListener("click",function(){document.querySelector(".modal").style.display="none"}),Array.from(document.querySelectorAll(".modal-content p")).forEach(function(e){return e.addEventListener("click",n)})}function c(e,t){return"https://newsapi.org/v2/"+e+"?"+t+"&apiKey=f1e5704e50ab42bf909e1a1598498713"}function r(e,t){if(null!=e.description&&null!=e.title&&null!=e.urlToImage){document.querySelector("."+t).innerHTML+="\n    <a class='article-grid' href='"+e.url+"' target='_blank'>\n      <div class='article-image'><img src="+e.urlToImage+"></div>\n      <div class='article-content'>\n        <p class='article-title'>"+(e.title.length>80?e.title.slice(0,79)+"...":e.title)+"</p>\n        <p class='article-body'>"+(e.description.length>140?e.description.slice(0,139)+"...":e.description)+"</p>\n        <p class='article-time'>"+e.publishedAt.slice(5,10)+" at "+e.publishedAt.slice(11,16)+" - "+e.source.name+"</p>\n      </div>\n    </a>\n  "}}function o(e,t){e.join(",");fetch(c("top-headlines","sources="+e)).then(function(e){return e.json()}).then(function(e){Array.from(e.articles).forEach(function(e){return r(e,t)})})}function a(){l(),document.querySelector(".edit-view").addEventListener("click",function(){document.querySelector(".active");n(document.querySelector(".active").classList[1])}),document.querySelector(".remove-view").addEventListener("click",function(){var e=JSON.parse(window.localStorage.getItem("Data"));delete e[document.querySelector(".active").classList[1]];var t=JSON.stringify(e);window.localStorage.setItem("Data",t),l()}),Array.from(document.querySelectorAll(".accordian")).forEach(function(e){return e.addEventListener("click",function(){var e=this.nextElementSibling;Array.from(document.querySelectorAll(".panel")).forEach(function(e){return e.classList.contains("panel-active")?e.classList.remove("panel-active"):null}),e.classList.add("panel-active")})})}var l=function(){var t=document.querySelectorAll(".content-grid");t.length>0&&Array.from(t).forEach(function(e){return e.parentNode.removeChild(e)});var c=document.querySelectorAll("nav button");c.length>0&&Array.from(c).forEach(function(e){return e.parentNode.removeChild(e)});var r=[];if(null===window.localStorage.getItem("Data")||"{}"===window.localStorage.getItem("Data"))return document.querySelector(".intro-screen").style.display="flex",void document.querySelector(".create-custom").addEventListener("click",function(){n("")});document.querySelector(".intro-screen").style.display="none";var a=JSON.parse(window.localStorage.getItem("Data"));Object.keys(a).forEach(function(t){var n=document.querySelector("nav"),c=document.createElement("button"),l=document.createTextNode(t);c.appendChild(l),c.classList.add("nav-"+t),c.addEventListener("click",function(){e(t,r)}),n.appendChild(c);var i=document.createElement("div");i.classList.add("content-grid",t),document.querySelector("body").appendChild(i),o(a[t],t)});var l=document.querySelector("nav").getElementsByTagName("button");l[0].classList.add("active-nav"),Array.from(l).forEach(function(e){var t=document.querySelector("."+e.classList[0].slice(4));l[0]==e?t.classList.add("active"):t.classList.add("move-right")});var i=document.createElement("button"),d=document.createTextNode("+");i.appendChild(d),i.addEventListener("click",function(){n("")}),document.querySelector("nav").appendChild(i)};document.addEventListener("DOMContentLoaded",a)}();
